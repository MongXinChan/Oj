# 位运算

## 2的幂

如果 $n$ 是 2 的幂，那么 $n$ 的二进制形如 $100\cdots0$，例如 $4 = 100_{(2)}$，$8 = 1000_{(2)}$。

注意到

$$
8 = 1000
\\8 - 1 = 0111
$$
所以 $8 \& (8 - 1) = 0$ 一定成立。

一般地，如果 $n$ 是 2 的幂，把 $n$ 减一会使 $n$ 的最高位变成 0，其余低位变成 1，所以 $n \& (n - 1) = 0$ 一定成立。

如果 $n$ 不是 2 的幂，那么 $n$ 的二进制至少有两个 1。把 $n$ 减一，并不会影响 $n$ 最高位的 1，所以 $n \& (n - 1) \neq 0$ 必然成立。

综上所述：
如果 $n > 0$，可以用 $n \& (n - 1) = 0$ 判断，若成立，则 $n$ 是 2 的幂；若不成立，则 $n$ 不是 2 的幂。
如果 $n \leq 0$，$n$ 不是 2 的幂。

## 3的幂